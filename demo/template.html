{% extends "component-demo-base.html" %}

{% set TAG_NAME="x-deck" %}
{% set COMPONENT_NAME="deck" %}

{% block demoContent %}
<p><code class="prettyprint">&lt;x-deck&gt;</code>s are components that act similarly to a deck of cards, where any <code class="prettyprint">&lt;x-card&gt;</code> element can be moved into view independent of DOM order</p>
    <section class="demo-wrap">
        <header><h2>Basic usage</h2></header>
        <p>For basic transitions between <code class="prettyprint">&lt;x-card&gt;</code>s, simply call the <code class="prettyprint">.nextCard()</code> and <code class="prettyprint">.previousCard()</code> methods of the <code class="prettyprint">&lt;x-deck&gt;</code>.</p>
        <p>You can also call <code class="prettyprint">.showCard(index)</code> if they have a specific index or card element you wish to show (by passing a reference).</p>
        <p>The <code class="prettyprint">loop</code> attribute option allows the deck to loop around after reaching the first or last index.</p>
        <p>By default, there is no animation applied to card switching, but the <code class="prettyprint">transition-type</code> attribute lets you apply a variety of animations if you choose - more on that later</p>
        <div class="two-up">
            <figure class="demo">
                <x-deck id="deck_1">
                    <x-card selected>0<span>First</span></x-card>
                    <x-card>1<span>Second</span></x-card>
                    <x-card transition-type="fade-scale">2<span>Third</span></x-card>
                    <x-card transition-type="slide-left">3<span>Fourth</span></x-card>
                    <x-card transition-type="slide-up">4<span>Fifth</span></x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default next">Next card</button>
                <button class="btn btn-default showCard" target=1>Show card 1</button>
                <button class="btn btn-default" onclick="this.textContent = 'Loop: ' + (document.getElementById('deck_1').loop = !document.getElementById('deck_1').loop);">Loop: false</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
            <h3>JavaScript</h3>
            <pre class="prettyprint javascript">// assume prevButton, nextButton, toButton, and deck<br/>//are already defined as their respective DOM elements<br/>prevButton.addEventListener(&quot;click&quot;, function(){<br/>    deck.previousCard();<br/>});<br/>nextButton.addEventListener(&quot;click&quot;, function(){<br/>    deck.nextCard();<br/>});<br/>toButton.addEventListener(&quot;click&quot;, function(){<br/>    deck.showCard(1);<br/>});</pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section class="demo-wrap">
        <header><h2>Specifying animation direction</h2></header>
        <p>The <code>.previousCard()</code>, <code>.nextCard()</code>, and <code>.showCard()</code> methods can also be called with an optional direction parameter of either <code>"forward"</code> or <code>"reverse"</code> to specify how animations should progress.
        </p>
        <p>If this parameter is omitted, the animation direction defaults to <code>"forward"</code> if the new index is greater than the previously selected index, and <code>"reverse"</code> if less than the previously selected index.</p>
        <div class="two-up">
            <figure class="demo">
                <x-deck>
                    <x-card selected transition-type="slide-right">0<span>First</span></x-card>
                    <x-card transition-type="slide-left">1<span>Second</span></x-card>
                    <x-card transition-type="fade-scale">2<span>Third</span></x-card>
                    <x-card transition-type="slide-up">3<span>Fourth</span></x-card>
                    <x-card transition-type="slide-down">4<span>Fifth</span></x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <h4>Automatic animation direction</h4>
                <button class="btn btn-default prev"><code>.previousCard()</code></button>
                <button class="btn btn-default next"><code>.nextCard()</code></button>
                <button class="btn btn-default showCard" target=1><code>.showCard(1)</code></button>
                <h4>Reverse animation direction</h4>
                <button class="btn btn-default prev reverse"><code>.previousCard("reverse")</code></button>
                <button class="btn btn-default next reverse"><code>.nextCard("reverse")</code></button>
                <button class="btn btn-default showCard reverse" target=1><code>.showCard(1, "reverse")</code></button>
                <h4>Forward animation direction</h4>
                <button class="btn btn-default prev forward"><code>.previousCard("forward")</code></button>
                <button class="btn btn-default next forward"><code>.nextCard("forward")</code></button>
                <button class="btn btn-default showCard forward" target=1><code>.showCard(1, "forward")</code></button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section class="demo-wrap" id="transition-demo">
        <header><h2>Specifying deck transitions: <code>transition-type/.transitionType</code></h2></header>
        <p>By default, there is no transition animation applied when switching between <code class="prettyprint">&lt;x-card&gt;</code> elements, but we provide a batch of ready-made transitions you can apply using the <code>transition-type</code> attribute (also accessible by the <code>.transitionType</code> property).</p>
        <p>Valid options:
            <code>
                slide-up,
                slide-down,
                slide-left,
                slide-right,
                fade-scale
            </code>
        </p>

        <div class="two-up">
            <figure class="demo">
                <x-deck class="simple-deck" transition-type="slide-left">
                    <x-card selected>0</x-card>
                    <x-card>1</x-card>
                    <x-card>2</x-card>
                    <x-card>3</x-card>
                    <x-card>4</x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default"
                        data-toggle-prop="transitionType"
                        data-toggle-target="x-deck"
                        data-toggle-options='["slide-up", "slide-down", "slide-left", "slide-right", "fade-scale"]'>
                    Change <code>transition-type</code>
                </button>
                <button class="btn btn-default next">Next card</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
            <h3>JavaScript</h3>
            <pre class="prettyprint javascript">// assume transitionButton and deck are already<br/>// defined as their respective DOM elements<br/>var types = [<br/> &quot;slide-up&quot;, &quot;slide-down&quot;, &quot;slide-left&quot;, &quot;slide-right&quot;,<br/>&quot;fade-scale&quot;,<br/>&quot;none&quot;<br/> ];<br/>transitionButton.addEventListener(&quot;click&quot;, function(){<br/>    var oldType = deck.transitionType;<br/>    deck.transitionType = types[(types.indexOf(oldType)+1) % type.length];<br/><br/>    // force animation to make visible for demo<br/>    deck.nextCard(&quot;forward&quot;);<br/>});</pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section class="demo-wrap">
        <header><h2>Specifying card-specific animations: <code>transition-type/.transitionType</code></h2></header>
        <p>While the <code class="prettyprint">&lt;x-deck&gt;</code>'s <code>transition-type</code> attribute changes the animation of all cards, it is also possible to specify how a specific <code class="prettyprint">&lt;x-card&gt;</code> animates by specifying a <code>transition-type</code> attribute on individual <code class="prettyprint">&lt;x-card&gt;</code> elements</p>

        <div class="two-up">
            <figure class="demo">
                <x-deck class="simple-deck" transition-type="slide-left">
                    <x-card selected>0</x-card>
                    <x-card transition-type="slide-down">1</x-card>
                    <x-card>2</x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default next">Next card</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section class="demo-wrap">
        <header><h2>Adding and removing cards</h2></header>
        <p>To add or remove <code class="prettyprint">&lt;x-card&gt;</code>s from a deck, simply use <code class="prettyprint">.appendChild()</code> or <code>.removeChild()</code> in the same way that any other DOM node would be added/removed.
        </p>

        <div class="two-up">
            <figure class="demo">
                <x-deck class="simple-deck">
                    <x-card selected>0</x-card>
                    <x-card>1</x-card>
                    <x-card>2</x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default next">Next card</button>
                <button class="btn btn-default add">Add card</button>
                <button class="btn btn-default remove">Remove card</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
            <h3>JavaScript</h3>
            <pre class="prettyprint javascript">// assume addButton, removeButton, and deck<br/>//are already defined as their respective DOM elements<br/>// also assume that .randomColor simply returns a random color rgb string<br/>addButton.addEventListener(&quot;click&quot;, function(){<br/>    // deck.numCards retrieves the number of cards currently in the deck<br/>    var newIndex = deck.numCards;<br/>    var newCard = document.createElement(&quot;x-card&quot;);<br/>    newCard.style.backgroundColor = randomColor();<br/>    newCard.textContent = newIndex;<br/>    deck.appendChild(newCard);<br/>    // for demo, shuffle to newly inserted card<br/>    deck.showCard(newIndex);<br/>});<br/>removeButton.addEventListener(&quot;click&quot;, function(){<br/>    if(deck.numCards &gt; 0){<br/>        //deck.getCardAt retrieves the &lt;x-card&gt; at the given index<br/>        var lastCard = deck.getCardAt(deck.numCards-1);<br/>        deck.removeChild(lastCard);            <br/>    }<br/>});</pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section class="demo-wrap">
        <header><h2>Styling deck appearances</h2></header>
        <p>Styling the <code class="prettyprint">&lt;x-deck&gt;</code> and <code class="prettyprint">&lt;x-card&gt;</code> elements can be done like any other DOM elements. (By default, the deck attempts to be 100% width and height of its parent element, but this can be overridden.)</p>
        <p>However, the deck also provides some CSS selectors to customize how cards appear during animations.</p>
        <p>To style how a card appears as it is transitioning out of the deck, apply styles to <code class="prettyprint">x-card[hide]</code></p>
        <p>To style how a card appears when it is specifically selected in the deck, apply styles to <code class="prettyprint">x-card[selected]</code></p>

        <div class="two-up">
            <figure class="demo">
                <x-deck id="custom-styles" class="simple-deck" transition-type="slide-left">
                    <x-card selected>0</x-card>
                    <x-card>1</x-card>
                    <x-card>2</x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default next">Next card</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
            <h3>Styling</h3>
            <pre class="prettyprint css">/* grey out hiding card */<br/>#custom-styles x-card[hide]{<br/>    text-shadow: none;<br/>    background-color: grey!important;<br/>    color: #ccc;<br/>    opacity: 0.6;<br/>}<br/>/* add caption to selected card */<br/>#custom-styles x-card[selected]:after{<br/>    content: &quot;selected&quot;;<br/>    display: block;<br/>    font-size: .2em;<br/>}</pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>

    <section id="shuffleevents-demo" class="demo-wrap">
        <header><h2>Handling card switching events: <code>show</code>, <code> hide</code></h2></header>
        <p>When the deck is transitioning cards, it fires events in order to signal different stages of the animation.</p>
        <p>An <code>show</code> event is fired from a card target after it has completed its show animation, and the show state has been finalized.</p>
		<p>An <code>hide</code> event is fired from a card target after it has completed its hide animation, and the hide state has been finalized.</p>
        <div class="two-up">
            <figure class="demo" >
                <x-deck class="simple-deck" transition-type="fade-scale">
                    <x-card selected>0</x-card>
                    <x-card>1</x-card>
                    <x-card>2</x-card>
                </x-deck>
            </figure>
        </div>
        <div class="markup-wrap two-up">
            <div class="controls">
                <button class="btn btn-default prev">Previous card</button>
                <button class="btn btn-default next">Next card</button>
                <button class="btn btn-default add" noshuffle>Add card</button>
                <button class="btn btn-default remove">Remove card</button>
            </div>
            <h3>Markup</h3>
            <pre class="prettyprint html"></pre>
            <h3>Events</h3>
            <pre class="prettyprint events"></pre>
        </div>
        <a href="#" class="top">Top</a>
    </section>
{% endblock %}